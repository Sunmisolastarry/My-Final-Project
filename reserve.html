<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reservation</title>
    <link rel="stylesheet" href="./style.css">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</head>
<body class="re">
    <nav>
        <div class="one">
          <h1>W-Starry Restaurant</h1>
         </div>
        
        <ion-icon class="menu" name="menu-outline"></ion-icon>
          <div class="left__listing">
            <ion-icon class="close" name="close-outline"></ion-icon>
            
            <ul class="nav__list">
              <li><a href="./home.html">Home</a></li>
              <li><a href="./contact.html">Contact</a></li>
              <li><a href="./menu.html">Menu</a></li>
              
            </ul>
            
            
            <div class="btn">
              <a href="./cart.html"><ion-icon name="cart" class="icon-cart"></ion-icon><span id="cart-counter">0</span></a>
              <button><a href="./reserve.html">Book A Table</a></button>
            </div>
          </div>
        </nav>

   <form action="#" method="get" onsubmit="sendMessage">
    <h1>Make Reservation</h1>
    
    <input class="name" id="name" type="text" placeholder="name" onkeyup="setMessageLink()" onkeyup="clearNameError()" ><br>
    <span id="nameErrorMessage"></span><br>
    
    <input class="twin" type="tel" id="phone" placeholder="phone-number" name="phone" onkeyup="setMessageLink()" onkeyup="clearPhoneError()"> <br>
    <span id="phoneErrorMessage"></span><br>
    
    <input class="twin twins" type="email" name="email" placeholder="e-mail" id="email" onkeyup="setMessageLink()" onkeyup="clearEmailError()"><br>
    <span id="emailErrorMessage"></span><br>
    
    <div class="dandt">
    <label class="ldate" for="date">Date</label>
    <input class="date" type="date" name="date" id="date" placeholder="12 December 2023" onchange="setMessageLink()"><br>
    <span id="dateErrorMessage"></span><br>
    
    <label class="ltime" for="time">Time</label><br>
    <input class="time" name="time" id="time" type="time" onchange="setMessageLink()">
    <span id="timeErrorMessage"></span><br>
    </div>
    
    <label class="person" for="person">Person</label>
    <select class="dropdown" id="person" name="person" onchange="setMessageLink()">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
      </select>
      <div class="sub">
        <a id="whatsapp_link" class="su" href="" type="submit">Submit</a>
       </div>
   </form>

   <marquee behavior="" direction="">We can't wait for you to dine with us.......We're opened everyday of the week from 11am-11pm......</marquee>
   <script>
    function setMessageLink() {
      let name = document.getElementById('name').value;
      let phone = document.getElementById('phone').value;
      let date = document.getElementById('date').value;
      let email = document.getElementById('email').value;
      let person = document.getElementById('person').value;
      let time = document.getElementById('time').value;

      let message = "";
      message += "Name: " + name + "\n";
      message += "Phone: " + phone + "\n";
      message += "Email: " + email + "\n";
      message += "Date: " + date + "\n ";
      message += "Person: " + person + "\n";
      message += "Time: " + time + "\n";

      let messageLink = "https://wa.me/+2347018529878?text=" + encodeURIComponent(message);
      //console.log(messageLink);
      document.getElementById('whatsapp_link').href = messageLink;
    }



    
// ============ Form Validaion ==========
const inpTag = document.getElementById("name");
const inpTag2 = document.getElementById("phone");
const inpTag3 = document.getElementById("email");
const date = document.getElementById("date")
const time = document.getElementById("time")
const dropdown = document.getElementById("person");
const button = document.querySelector(".sub");

button.addEventListener("click", (e) => {
    e.preventDefault()
      
  // VALIDATION
  if (inpTag.value === "") {
      document.getElementById('nameErrorMessage').innerHTML = "Enter Your Name";
    } else if (inpTag2.value === "") {
      document.getElementById('phoneErrorMessage').innerHTML = "Enter Your Phone Number";
    } else if (inpTag3.value === "") {
      document.getElementById('emailErrorMessage').innerHTML = "Enter Your E-mail";
    } else if (date.value === "") {
      alert("Choose a date")
      // document.getElementById('dateErrorMessage').innerHTML = "choose a date" 
    }else if (time.value === "") {
      alert("pick a time")
      // document.getElementById('timeErrorMessage').innerHTML = "pick a time"
    } else {
      window.open(document.getElementById('whatsapp_link').href)
    }
  });


  // Get reference to input elements and error message spans
  const nameInput = document.getElementById("name");
  const phoneInput = document.getElementById("phone");
  const emailInput = document.getElementById("email");
  const nameErrorMessage = document.getElementById("nameErrorMessage");
  const phoneErrorMessage = document.getElementById("phoneErrorMessage");
  const emailErrorMessage = document.getElementById("emailErrorMessage");

  // Add event listeners to clear error messages on keyup
  nameInput.addEventListener("keyup", clearNameError);
  phoneInput.addEventListener("keyup", clearPhoneError);
  emailInput.addEventListener("keyup", clearEmailError);

  // Function to clear name error message
  function clearNameError() {
    if (nameInput.value !== "") {
      nameErrorMessage.innerHTML = "";
    }
  }

  // Function to clear phone number error message
  function clearPhoneError() {
    if (phoneInput.value !== "") {
      phoneErrorMessage.innerHTML = "";
    }
  }

  // Function to clear email error message
  function clearEmailError() {
    if (emailInput.value !== "") {
      emailErrorMessage.innerHTML = "";
    }
  }

   </script>
</body>
<script src="./all.js"></script>
</html>